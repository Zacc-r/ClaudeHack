# Feb 21, 2026 — DRAKO Hackathon Day

## Project: DRAKO Voice Schedule Builder
AI Interfaces Hackathon with Claude — Build window: 10:45 AM – 6:30 PM EST

## Live URLs
- **Production**: https://drako-voice-scheduler.vercel.app
- **Vercel project**: zaccs-projects-d5692e6f/drako-voice-scheduler
- **GitHub**: https://github.com/Zacc-r/ClaudeHack

## Stack
Next.js 16 / React 19 / TypeScript / Tailwind / ioredis / @anthropic-ai/sdk / @copilotkit/* / Tavus CVI

## Current Phase: 2B Complete → entering Phase 3

## What's built and working
- Full multi-user onboarding (5 steps: name → role → wake time → priorities → struggle → build)
- Claude-powered schedule generation from survey data
- Redis sorted-set schedule storage + SSE pub/sub real-time updates
- Tavus CVI voice conversation (DRAKO persona with 4 tools: get/add/move/remove event)
- Webhook handling for conversation lifecycle + speaker state detection
- Cookie-based user sessions, schedule CRUD API
- CopilotKit text chat fallback
- QR share page (/share)
- DrakoRobot SVG component with states (idle/greeting/thinking/listening)

## Known gaps / next priorities
1. Tinder swipe game for onboarding (swipe L/R to adjust time per activity, swipe UP to confirm)
2. Enhanced data model: sleepTime {bedtime, wakeTime}, peakFocusWindow, timeAllocations per activity
3. Daily check-in: DRAKO asks "what's on today?" each morning
4. First live Tavus test to verify webhook event names
5. Mobile WiFi test on iPhone 16e (UDID: 00008140-000871E43A9B801C, WiFi: 10.4.33.117)

## OpenClaw config
- Model: anthropic/claude-sonnet-4-6 (already correct, NOT Grok)
- Workspace: /Users/zacc/Documents/Hackathon

## Vercel env vars set
ANTHROPIC_API_KEY, TAVUS_API_KEY, REDIS_URL, NEXT_PUBLIC_APP_URL

---
## UPDATE 16:06 EST — E2E testing + multi-page restructure

### App restructured to 4 pages
- `/` → Landing (DRAKO welcome, "Build My Day" CTA)
- `/onboarding` → 5-step survey
- `/play` → Tinder swipe game (new — allocate time per activity by dragging cards)
- `/schedule` → Calendar + DRAKO voice

### Tinder Swipe Game (/play)
- Full swipe mechanic: drag right = more time, drag left = less time, swipe up / tap = lock in
- 8 activities: deep focus, exercise, learning, creative, social, meditation, side project, fun
- Saves `timeAllocations` to Redis via PATCH /api/user
- Auth guard added — redirects to /onboarding if no cookie

### E2E Test Results (all on production)
- ✅ Onboarding → Claude Haiku → 9 events → Redis
- ✅ Cookie auth persists across page nav
- ✅ Persona generated: "The Focus Architect" — archetype, greeting, protections
- ✅ Swipe game PATCH saves timeAllocations
- ✅ Tavus conversation created (conversationId: c7edcf04ef9f5478)
- ⚠️ SSE stream reconnects every ~10s (Vercel hobby limit) — exponential backoff in place
- ❌ Live Tavus voice test NOT yet done — this is the missing final verification

### Infra state
- Vercel: https://drako-voice-scheduler.vercel.app (personal scope: zaccs-projects-d5692e6f)
- Redis TLS (rediss://) working on Vercel
- All env vars set: ANTHROPIC_API_KEY, TAVUS_API_KEY, REDIS_URL, NEXT_PUBLIC_APP_URL
- Claude model: claude-haiku-4-5 across all routes (cost ~$0.001/user)
- Viewport meta tag added (critical mobile fix)
- Build passing locally, Vercel build failed on last deploy (investigating)

### OpenClaw confirmed
- Model: anthropic/claude-sonnet-4-6 (NOT Grok — was a misunderstanding)

### LAN dev server
- Mac IP: 10.4.33.167 — dev server at http://10.4.33.167:3000
- iPhone 16e: 10.4.33.117 (same WiFi)
- Dev server bound to 0.0.0.0 — phone can reach it

### Next to do
- Fix Vercel build error (unknown cause — local build passes)
- Run live Tavus voice test — SAY something to DRAKO, verify event appears in calendar
- Tinder swipe UX polish (Cursor prompt already written)
- Dashboard + profile settings sidebar (Cursor prompt written)

---
## UPDATE 16:12 EST — Session compaction (pre-compaction flush)

### Current state summary
- Multi-page flow: `/` → `/onboarding` → `/play` → `/schedule` (confirmed working)
- `/play/page.tsx` — Tinder swipe game EXISTS and works (swipe L/R/UP gestures, timeAllocations)
- `/schedule/page.tsx` — STILL TODO (needs migration from original 311-line page.tsx)
- Landing page (`/src/app/page.tsx`) — New landing with DRAKO robot, gradient, "Build My Day" button
- `/onboarding/page.tsx` — Wraps OnboardingFlow, saves to sessionStorage, pushes to /play

### What's NOT done yet
1. `/schedule/page.tsx` — Needs to be created; migrate original page.tsx content (DRAKO voice, SSE, CopilotKit, VideoCall, ScheduleView)
2. Read user/events from sessionStorage on mount in /schedule page
3. First live Tavus voice test on iPhone
4. Persona display in onboarding done screen (archetypeEmoji, archetype, drakoGreeting)
5. Fix onboarding scroll on mobile

### Key file locations
- Project: /Users/zacc/Documents/Hackathon/drako-voice-scheduler/
- Main page (to migrate TO /schedule): /Users/zacc/Documents/Hackathon/drako-voice-scheduler/src/app/page.tsx
- Redis lib: /Users/zacc/Documents/Hackathon/drako-voice-scheduler/src/lib/redis.ts
- Onboarding API: /Users/zacc/Documents/Hackathon/drako-voice-scheduler/src/app/api/onboarding/route.ts

### Critical config reminders
- Redis: `redis://` only (NOT rediss:// — SSL fails); no enableOfflineQueue
- Claude model: `claude-haiku-4-5` (NOT claude-haiku-4-20250514)
- Vercel scope: personal (zaccs-projects-d5692e6f), NOT team scope
- maxDuration = 300 on SSE route
- State between pages: sessionStorage for user/events data, cookies for persistent userId

### Tavus
- API key: 497076457f424eb7ab2679c5d78c9a05
- Last conversation ID: c7edcf04ef9f5478
- Tools: get_schedule, add_event, move_event, remove_event
- Webhook: /api/webhook/tavus/route.ts handles 10+ event types

### Build window ends 6:30 PM EST
- ~2h 18min remaining as of this log entry
